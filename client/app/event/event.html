<section ng-controller="eventController">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <div class="container">
    <div class="pageTitle">
      <div style="display:flex; flex-flow: row nowrap">
        <h1>{{event.name}}</h1>
        <div id="eventHost">
          hosted by <span id="eventHostName">{{event.host}}</span>
        </div>
        <div id="countDown" ng-bind="countDown"></div>
      </div>
      <div id="chatToggle">
        <div id="showChat"><a href="javascript:void(0)" onclick="document.getElementById('hideChat').style.display='block';document.getElementById('showChat').style.display='none'" ng-click="toggleChat()">Show Chat</a></div>
        <div id="hideChat"><a href="javascript:void(0)" onclick="document.getElementById('showChat').style.display='block';document.getElementById('hideChat').style.display='none'" ng-click="toggleChat()">Hide Chat</a></div>
      </div>
    </div>
    <div class="line"></div>
    <div id="genreNames">
      <div ng-repeat="genre in event.genres"> {{genre.name}}<span ng-if="$index !== event.genres.length-1">, &nbsp;</span> </div>
    </div>

    <!-- host admin panel for setting up the stream -->
    <!-- can we call the method on the factory? might need to set that method in the scope to call it here -->
    <div ng-show="isSameUser">{{isSameUser}}
      <button ng-click="startStream();">start stream</button>
    </div>
    <div ng-show="isSameUser == false">{{isSameUser}}
      <button ng-click="loadStream();">load stream</button>
    </div>

    <div id="eventcontent">
      <div id="videoWrapper">
        <video id="myVideo" muted="false" class="myVideo" autoplay ng-show="isSameUser" width="640" height="390"></video>
        <video id="theirVideo" muted="false" class="theirVideo" autoplay ng-show="isSameUser == false" width="640" height="390"></video>
        <!-- <div id="ytplayer"></div>
        <span class="video"></span> -->
      </div>
      <div id="chatcontent" ng-show="chatVisible">
        <div id="chat-tabs">
          <div class="chat-tabs" ng-class="{'chat-tabs-selected':selectedChat[0]}" ng-click="selectTab(0)">All</div><!--
       --><div class="chat-tabs" ng-class="{'chat-tabs-selected':selectedChat[1]}" ng-click="selectTab(1)">Host</div>
        </div>
        <div ng-hide="!selectedChat[0]" id="chatMessages">
          <div ng-repeat="message in event.messages" class="message" ng-class="{'message-host': isHost(message), 'message-user': isUser(message)}"><div ng-bind="chatTime(message.timestamp)"></div><b>{{message.username}}: </b> {{message.message}}</div>
        </div>
        <div ng-hide="!selectedChat[1]" id="hostMessages">
          <div ng-repeat="message in event.hostMessages" class="message"><div ng-bind="chatTime(message.timestamp)"></div><b>{{message.username}}: </b> {{message.message}}</div>
        </div>
        <form>
          <input type="text" id="chatTextbox" ng-model="userText"></input>
          <input type="submit" id="sendButton" ng-click="sendMessage()">
        </form>
        </div>
      </div>
    </div>
  </div>
</section>