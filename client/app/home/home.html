<section ng-controller="homeController">

  <div class="container">

    <div class="eventTabs">
      <span ng-click="viewFutureEvents()" ng-class="{selectedView: futureView, notSelectedView: !futureView}" class="eventTab">
        Upcoming events
      </span>
      <span ng-click="viewPastEvents()" ng-class="{selectedView: pastView, notSelectedView: !pastView}" class="viewPastEvents eventTab">
        Past events
      </span>
      <span ng-click="viewDateFilter()" ng-class="{selectedView: customDateView, notSelectedView: !customDateView}" class="viewPastEvents eventTab">
        Custom date range
      </span>
      <span class="borderExtension">
        .
      </span>
    </div>


    <div class="filterOptions">
      <div ng-if="customDateView" class="dateFilter">
        <div class="dateFilter" ng-click="dateFilterToggle()">Filter by date range</div>
        <div class="dateSelection">
          <input type="date" ng-model="dateRange.start">
          to
          <input type="date" ng-model="dateRange.end">
        </div>
      </div>
    </div>
    <div class="filterOptions">
      <div class="genreList">
        <div ng-click="showGenresNow()">Filter by genre</div>
        <ul class="dropDownMenu" ng-if="showGenres">
          <li ng-repeat="genre in genres" ng-click="chooseGenre(genre)" ng-class="{'selected': genre.selected, 'notSelected': !genre.selected}">{{genre.name}}</li>
        </ul>
      </div>
      <div class="filterTextBoxes">
        <input type="text" placeholder="Filter by title" ng-model="filterByTitle" ng-model-options="{debounce: {'default': debounce}}">
        
        <input type="text" placeholder="Filter by user" ng-model="filterByUser" ng-model-options="{debounce: {'default': debounce}}">
      </div>
    </div>


    <div class="eventList">
      <div ng-repeat="event in filteredEvents(events) | orderBy: 'date': isReverse | limitTo: numLimit" class="event" style="background-image: url({{event.image}})" mouse-over>

        <div class="eventInfo">

          <p><a href="#/event/{{event.key}}">{{event.title}}</a></p>
          <p>by <a href="#/userProfile/{{event.host}}">{{event.host}}</a></p>
          <p><span ng-repeat="genre in event.genre">
            {{genre}}
          </p>
          <p>{{event.date | date: 'short'}}</p>
        </div>
        <div class="eventBackdrop"></div>
      </div>
    </div>

<!--     <div ng-if="showMoreButton" class="showMoreEvents" ng-click="increaseNumLimit()">
      Show More Events
    </div> -->

    <div ng-if="!showMoreButton" class="showMoreEvents">
      End of Results
    </div>
  </div>
</section>