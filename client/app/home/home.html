<section ng-controller="homeController">

  <div class="container">
    <div class="pageTitle">
      <div style="display:flex; flex-flow: row nowrap">
      <h1>Events</h1>
      </div>
    </div>
    <div class="line"></div>

    <div class="eventTabs">
      <span ng-click="viewFutureEvents()" ng-class="{selectedView: dateView.futureView, notSelectedView: !dateView.futureView}" class="eventTab">
        Upcoming events
      </span>
      <span ng-click="viewPastEvents()" ng-class="{selectedView: dateView.pastView, notSelectedView: !dateView.pastView}" class="viewPastEvents eventTab">
        Past events
      </span>
      <span ng-click="viewDateFilter()" ng-class="{selectedView: dateView.customDateView, notSelectedView: !dateView.customDateView}" class="viewPastEvents eventTab">
        Custom date range
      </span>
      <span class="borderExtension">
      </span>
    </div>


    <div class="filterOptions filterLabel">Filter by:</div>
    <div class="filterOptions">
      <div ng-if="dateView.customDateView" class="dateFilter">
        <div class="dateFilter" ng-click="dateFilterToggle()">DATE:</div>
        <div class="dateSelection">
          <input type="date" ng-model="dateView.start">
          to
          <input type="date" ng-model="dateView.end">
        </div>
      </div>
    </div>
    <div class="filterOptions">
      <div class="genreList">
        <div class="dropDownLink" ng-click="showGenresNow()">
          GENRE<img src="./assets/dropdownarrow.png">
        </div>
        <ul class="dropDownMenu" ng-if="showGenres">
          <li ng-repeat="genre in genres" ng-click="chooseGenre(genre)" ng-class="{'selected': genre.selected, 'notSelected': !genre.selected}">{{genre.name}}</li>
        </ul>
      </div>
      <div class="filterTextBoxes">
        <input type="text" class="filterInput" placeholder="TITLE" ng-model="filterByTitle" ng-model-options="{debounce: {'default': debounce}}">
        
        <input type="text" placeholder="USER" ng-model="filterByUser" ng-model-options="{debounce: {'default': debounce}}">
      </div>
    </div>


    <div class="eventList">
      <div ng-repeat="event in filteredEvents(events) | orderBy: 'date': isReverse | limitTo: numLimit" class="event fade-list" style="background-image: url({{event.image}})" mouse-over>

        <div class="eventInfo">
          <div id="event-title">
            <a href="#/event/{{event.key}}">{{event.title}}</a>
          </div>
          <p>by <a href="#/userProfile/{{event.host}}">{{event.host}}</a>
          - <button class="rsvp" ng-click="saveDate(event.title, event.host, event.key)">RSVP Now</button>
          </p>
          <p><span ng-repeat="genre in event.genre">
            {{genre}}
          </p>
          <p>{{event.date | date: 'short'}}</p>
        </div>
        <div class="eventBackdrop"></div>
      </div>
    </div>

    <div ng-if="showMoreButton" class="showMoreEvents" ng-click="increaseNumLimit()">
      Show More Events
    </div>

    <div ng-if="!showMoreButton" class="endOfResults">
      End of Results
    </div>
  </div>
</section>